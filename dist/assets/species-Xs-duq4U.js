import{r,j as e,C as w}from"./index-D61s1Tjt.js";import{a as b}from"./axios-B4uVmeYG.js";import{F as R}from"./index.es-DIYg4jCt.js";import{c as _}from"./index-BRDdHwgV.js";import{C as $,a as L}from"./CCardBody-BCTVJJ4q.js";import{C as U}from"./CCardHeader-D9bYJMT6.js";import{a as h}from"./index.es-vXd0TMDy.js";import{C as q}from"./CCardText-cPGRMmoT.js";import{C as G,a as J,b as A,c,d as K,e as y}from"./CTable-B6fphQoh.js";import{C as O,a as d}from"./CPaginationItem-JYshQXZk.js";import{C as v,a as F}from"./CModalHeader-CKcM1eys.js";import{C as T}from"./CModalTitle-DFgpSJeL.js";import{C as D}from"./CModalBody--9TayEQU.js";import{C as N}from"./CForm-BmHEjoGd.js";import{C as n}from"./CCol-B9bgIcnU.js";import{C as j}from"./CFormInput-DNacG-Xh.js";import{C as Q}from"./CModalFooter-Co--6Y0L.js";import"./DefaultLayout-CU_RidXn.js";import"./cil-lock-locked-DmxpJbVL.js";import"./tlogo1-w0QlOMSf.js";import"./cil-user-Ddrdy7PS.js";const ge=()=>{const[E,u]=r.useState(!1),[M,m]=r.useState(!1),[k,B]=r.useState([]),[I,S]=r.useState(null),[p,l]=r.useState(!1),[t,C]=r.useState({name:"",image:null}),[W,g]=r.useState(null),f=async()=>{try{const s=await b.get("http://www.taxidermyadmin.hunt30.com/api/species/getSpeciesCategories");B(s.data.data)}catch(s){g(s.response?s.response.data.message:"An error occurred while fetching species.")}};r.useEffect(()=>{f()},[]);const x=s=>{const{id:a,value:i,files:z}=s.target;C({...t,[a]:a==="image"?z[0]:i})},P=async s=>{s.preventDefault(),l(!0);const a=new FormData;a.append("name",t.name),a.append("image",t.image),l(!0);try{await b.post("http://www.taxidermyadmin.hunt30.com/api/species/SpeciesCategories",a,{headers:{"Content-Type":"multipart/form-data"}}),u(!1),o(),f()}catch(i){g(i.response?i.response.data.message:"An error occurred while adding species.")}finally{l(!1)}},H=async s=>{l(!0),s.preventDefault();const a=new FormData;a.append("name",t.name),t.image&&a.append("image",t.image);try{await b.put(`http://www.taxidermyadmin.hunt30.com/api/species/speciescategory/${I._id}`,a,{headers:{"Content-Type":"multipart/form-data"}}),m(!1),o(),f()}catch(i){g(i.response?i.response.data.message:"An error occurred while editing species.")}finally{l(!1)}},V=s=>{S(s),C({name:s.name||"",image:null}),m(!0)},o=()=>{C({name:"",image:null}),S(null)};return e.jsxs(e.Fragment,{children:[e.jsxs($,{children:[e.jsxs(U,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h3",{children:"Manage Species"}),e.jsx(h,{color:"primary",onClick:()=>u(!0),children:"Add Species"})]}),e.jsxs(L,{children:[e.jsx(q,{children:e.jsxs(G,{responsive:!0,striped:!0,hover:!0,bordered:!0,children:[e.jsx(J,{color:"dark",children:e.jsxs(A,{children:[e.jsx(c,{scope:"col",style:{textAlign:"center"},children:"S.No"}),e.jsx(c,{scope:"col",style:{textAlign:"center"},children:"Name"}),e.jsx(c,{scope:"col",style:{textAlign:"center"},children:"Image"}),e.jsx(c,{scope:"col",style:{textAlign:"center"},children:"Action"})]})}),e.jsx(K,{children:k.map((s,a)=>e.jsxs(A,{children:[e.jsx(c,{scope:"row",style:{textAlign:"center"},children:a+1}),e.jsx(y,{style:{textAlign:"center"},children:s.name||"null"}),e.jsx(y,{style:{textAlign:"center"},children:s.image&&e.jsx("img",{src:`http://www.taxidermyadmin.hunt30.com/${s.image}`,alt:s.name,style:{width:"50px",height:"50px",objectFit:"cover"}})}),e.jsx(y,{style:{textAlign:"center"},children:e.jsx("button",{style:{backgroundColor:"transparent",border:"none",cursor:"pointer"},onClick:()=>V(s),children:e.jsx(R,{icon:_,style:{fontSize:"15px",marginRight:"10px"}})})})]},s._id))})]})}),e.jsxs(O,{align:"center","aria-label":"Page navigation example",children:[e.jsx(d,{disabled:!0,"aria-label":"Previous",children:e.jsx("span",{"aria-hidden":"true",children:"«"})}),e.jsx(d,{active:!0,children:"1"}),e.jsx(d,{children:"2"}),e.jsx(d,{children:"3"}),e.jsx(d,{"aria-label":"Next",children:e.jsx("span",{"aria-hidden":"true",children:"»"})})]})]})]}),e.jsxs(v,{visible:E,onClose:()=>{u(!1),o()},children:[e.jsx(F,{closeButton:!0,children:e.jsx(T,{children:"Add Species"})}),e.jsx(D,{children:e.jsxs(N,{className:"row g-3",onSubmit:P,children:[e.jsx(n,{md:6,children:e.jsx(j,{type:"text",id:"name",label:"Name",value:t.name,onChange:x})}),e.jsx(n,{md:6,children:e.jsx(j,{type:"file",id:"image",label:"Image",onChange:x})}),e.jsx(n,{xs:12,children:e.jsxs(h,{type:"submit",color:"primary",className:"px-4",disabled:p,children:[p?e.jsx(w,{size:"sm"}):"Submit"," "]})})]})})]}),e.jsxs(v,{visible:M,onClose:()=>{m(!1),o()},children:[e.jsx(F,{closeButton:!0,children:e.jsx(T,{children:"Edit Species"})}),e.jsx(D,{children:e.jsxs(N,{className:"row g-3",onSubmit:H,children:[e.jsx(n,{md:6,children:e.jsx(j,{type:"text",id:"name",label:"Name",value:t.name,onChange:x})}),e.jsx(n,{md:6,children:e.jsx(j,{type:"file",id:"image",label:"Image",onChange:x})}),e.jsx(n,{xs:12,children:e.jsxs(h,{type:"submit",color:"primary",className:"px-4",disabled:p,children:[p?e.jsx(w,{size:"sm"}):"Update"," "]})})]})}),e.jsx(Q,{children:e.jsx(h,{color:"secondary",onClick:()=>{m(!1),o()},children:"Close"})})]})]})};export{ge as default};
